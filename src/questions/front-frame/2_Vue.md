# Vue

## vue3和vue2的区别

#### 类型：`基础`

#### 级别：`W1`、`W2`、`W3`、`W4`、`W5`、`W6`

#### 解答（11 分）

* **1：** 源码组织方式变化：使用 TS 重写
* **1：** 支持 Composition API：基于函数的API，更加灵活组织组件逻辑（vue2用的是options api）
* **1：** 响应式系统提升：Vue3中响应式数据原理改成proxy，可监听动态新增删除属性，以及数组变化
* **1：** 编译优化：vue2通过标记静态根节点优化diff，Vue3 标记和提升所有静态根节点，diff的时候只需要对比动态节点内容
* **1：** 打包体积优化：移除了一些不常用的api（inline-template、filter）
* **1：** 生命周期的变化：使用setup代替了之前的beforeCreate和created
* **1：** Vue3 的 template 模板支持多个根标签
* **1：** Vuex状态管理：创建实例的方式改变,Vue2为new Store , Vue3为createStore
* **1：** Route 获取页面实例与路由信息：vue2通过this获取router实例，vue3通过使用 getCurrentInstance/ userRoute和userRouter方法获取当前组件实例
* **1：** Props 的使用变化：vue2 通过 this 获取 props 里面的内容，vue3 直接通过 props
* **1：** 父子组件传值：vue3 在向父组件传回数据时，如使用的自定义名称，如 backData，则需要在 emits 中定义一下

## watch 和 watchEffect 的区别？

#### 类型：`基础`

#### 级别：`W1`、`W2`、`W3`、`W4`、`W5`、`W6`

#### 解答（3分）

* **1：** watch ：既要指明监视的数据源，也要指明监视的回调。

* **1：** watchEffect 可以自动监听数据源作为依赖。不用指明监视哪个数据，监视的回调中用到哪个数据，那就监视哪个数据。

* **1：** watch 可以访问改变之前和之后的值，watchEffect 只能获取改变后的值。

## 在 Vue2.x 中如何检测数组的变化？

#### 类型：`基础`

#### 级别：`W1`、`W2`、`W3`、`W4`、`W5`、`W6`

#### 解答（1分）

* **1：** 使用了函数劫持的方式，重写了数组的方法，Vue将data中的数组进行了原型链重写，指向了自己定义的数组原型方法。这样当调用数组api时，可以通知依赖更新。如果数组中包含着引用类型，会对数组中的引用类型再次递归遍历进行监控。这样就实现了监测数组变化。

## 在 v-if 与 v-show 的区别？

#### 类型：`基础`

#### 级别：`W1`、`W2`、`W3`、`W4`、`W5`、`W6`

#### 解答（1分）

* **1：** 当条件不成立时，v-if不会渲染DOM元素，v-show操作的是样式(display)，切换当前DOM的显示和隐藏。