# 前端性能优化

## 回流重绘

#### 类型：`中级`

#### 级别：`W1`、`W2`、`W3`、`W4`、`W5`、`W6`

#### 解答（5 分）

- **1：** 回流：浏览器渲染页面之前需要对结构进行布局计算
- **1：** 重绘：将已经计算好布局的容器绘制出来

- **1：** 触发回流：页面上有容器的几何属性发生变更
- **1：** 触发重绘：容器非几何属性变更 （字体，颜色）

- **1：** 回流必定重绘，重绘不一定回流

## 如何减少页面的回流和重绘？

#### 类型：`中级`

#### 级别：`W1`、`W2`、`W3`、`W4`、`W5`、`W6`

#### 解答（5 分）

- **1：** 合并DOM操作：
  + 使用文档片段（DocumentFragment）批量插入节点
  + 使用innerHTML一次性插入大量内容
  + 使用display: none隐藏元素后再进行多次操作，最后再显示

- **1：** 缓存布局信息：
  + 避免在循环中多次读取offset、scroll等属性
  + 使用变量缓存布局信息

- **1：** 使用CSS3特性：
  + 使用transform和opacity替代top、left等属性
  + 使用will-change提示浏览器优化

- **1：** 减少复杂的选择器：
  + 避免使用过于复杂的CSS选择器
  + 使用类选择器代替后代选择器

- **1：** 优化动画和过渡：
  + 使用requestAnimationFrame进行动画
  + 避免在动画中使用高开销的CSS属性
