# 前端性能优化

## 回流重绘

#### 类型：`中级`

#### 级别：`W1`、`W2`、`W3`、`W4`、`W5`、`W6`

#### 解答（5 分）

- **1：** 回流：浏览器渲染页面之前需要对结构进行布局计算
- **1：** 重绘：将已经计算好布局的容器绘制出来

- **1：** 触发回流：页面上有容器的几何属性发生变更
- **1：** 触发重绘：容器非几何属性变更 （字体，颜色）

- **1：** 回流必定重绘，重绘不一定回流

## 如何减少页面的回流和重绘？

#### 类型：`中级`

#### 级别：`W1`、`W2`、`W3`、`W4`、`W5`、`W6`

#### 解答（5 分）

- **1：** 合并DOM操作：
  + 使用文档片段（DocumentFragment）批量插入节点
  + 使用innerHTML一次性插入大量内容
  + 使用display: none隐藏元素后再进行多次操作，最后再显示

- **1：** 缓存布局信息：
  + 避免在循环中多次读取offset、scroll等属性
  + 使用变量缓存布局信息

- **1：** 使用CSS3特性：
  + 使用transform和opacity替代top、left等属性
  + 使用will-change提示浏览器优化

- **1：** 减少复杂的选择器：
  + 避免使用过于复杂的CSS选择器
  + 使用类选择器代替后代选择器

- **1：** 优化动画和过渡：
  + 使用requestAnimationFrame进行动画
  + 避免在动画中使用高开销的CSS属性

## 如何优化首屏加载时间？

#### 类型：`高级`

#### 级别：`W4`、`W5`、`W6`

#### 解答（6 分）

- **1：** 资源压缩与合并：
  + 使用工具压缩JavaScript、CSS和HTML
  + 合并多个CSS和JavaScript文件

- **1：** 使用CDN：
  + 将静态资源托管到CDN上
  + 减少资源加载的延迟

- **1：** 图片优化：
  + 使用合适的图片格式（如WebP）
  + 使用图片懒加载
  + 使用CSS Sprites合并小图标

- **1：** 服务器端渲染（SSR）：
  + 使用SSR生成首屏HTML
  + 减少客户端渲染的时间

- **1：** 减少HTTP请求：
  + 使用HTTP/2多路复用
  + 合并请求，减少请求数量

## 如何进行JavaScript性能优化？

#### 类型：`高级`

#### 级别：`W4`、`W5`、`W6`

#### 解答（6 分）

- **1：** 减少作用域链查找：
  + 使用局部变量缓存全局变量
  + 避免在循环中访问全局变量

- **1：** 避免不必要的计算：
  + 使用缓存存储计算结果
  + 使用位运算替代数学运算

- **1：** 优化循环：
  + 使用for循环代替forEach、map等
  + 在循环中缓存数组长度

- **1：** 使用异步编程：
  + 使用Promise、async/await优化异步操作
  + 使用Web Workers进行多线程计算

- **1：** 减少内存泄漏：
  + 使用WeakMap、WeakSet管理对象引用
  + 清理不再使用的事件监听器

- **1：** 使用现代JavaScript特性：
  + 使用ES6+特性优化代码结构
  + 使用模块化提高代码可维护性